<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<style>
    td {
        border: 1px solid black;
        width: 50px;
        height: 50px;
        text-align: center;
    }
</style>
<body onload="init()" style="justify-items: center;">
<div id="container"></div>

<script>
    let board = [];
    let turn = true;
    let count = 0;
    let range = [0, 1, 2, 3, 4, 5, 6, 7, 8];
    let container = document.getElementById('container');

    function drawBoard(locate1, locate2) {
        if (locate1 !== -2 && locate2 !== -2) {
            if (board[locate1][locate2] === 0) {
                if (turn) board[locate1][locate2] = 1;
                else board[locate1][locate2] = -1;
                yourTurn()
            }
        }

        let result = "<table>";
        for (let i = 0; i < board.length; i++) {
            result += "<tr>";
            for (let j = 0; j < board[i].length; j++) {
                result += "<td onclick='drawBoard(" + i + "," + j + ")'>"
                switch (board[i][j]) {
                    case 1:
                        result += "x";
                        break;
                    case -1:
                        result += "o";
                        break;
                    default:
                        result += "";
                }
                result += "</td>";
            }
            result += "</tr>";
        }
        result += "</table>";
        container.innerHTML = result;

        someBodyWin()
    }

    function someBodyWin() {
        for (let i = 0; i < board.length; i++) {
            for (let j = 0; j < board[i].length; j++) {
                if (board[i][j] === 1) {
                    count++;
                    checkAround(i, j, 1)
                } else if (board[i][j] === -1) {
                    count++;
                    checkAround(i, j, -1)
                }
            }
        }
    }

    function checkAround(locate1, locate2, player) {
        checkVertical(locate1, locate2, player);
        checkHorizontal(locate1, locate2, player);
        checkCross(locate1, locate2, player);
    }

    function checkVertical(locate1, locate2, player) {
        while(true) {
            if (range.includes(locate1 + count)) {
                if (board[locate1 + count][locate2] === player) {
                    count++;
                } else {
                    break;
                }
            } else {
                break;
            }
        }

        while (true) {
            if (range.includes(locate1 - count)) {
                if (board[locate1 - count][locate2] === player) {
                    count++;
                } else {
                    break;
                }
            } else {
                break;
            }
        }

        if (count >= 5) {
            checkCount(player);
        } else {
            count = 0;
        }
    }

    function checkHorizontal(locate1, locate2, player) {
        while(true) {
            if (range.includes(locate2 + count)) {
                if (board[locate1][locate2 + count] === player) {
                    count++;
                } else {
                    break;
                }
            } else {
                break;
            }
        }

        while (true) {
            if (range.includes(locate2 - count)) {
                if (board[locate1][locate2 - count] === player) {
                    count++;
                } else {
                    break;
                }
            } else {
                break;
            }
        }

        if (count >= 5) {
            checkCount(player);
        } else {
            count = 0;
        }
    }

    function checkCross(locate1, locate2, player) {
        while(true) {
            if (range.includes(locate2 + count) && range.includes(locate1 + count)) {
                if (board[locate1 + count][locate2 + count] === player) {
                    count++;
                } else {
                    break;
                }
            } else {
                break;
            }
        }

        while(true) {
            if (range.includes(locate2 - count) && range.includes(locate1 - count)) {
                if (board[locate1 - count][locate2 - count] === player) {
                    count++;
                } else {
                    break;
                }
            } else {
                break;
            }
        }

        while(true) {
            if (range.includes(locate2 - count) && range.includes(locate1 + count)) {
                if (board[locate1 + count][locate2 - count] === player) {
                    count++;
                } else {
                    break;
                }
            } else {
                break;
            }
        }

        while(true) {
            if (range.includes(locate2 + count) && range.includes(locate1 - count)) {
                if (board[locate1 - count][locate2 + count] === player) {
                    count++;
                } else {
                    break;
                }
            } else {
                break;
            }
        }

        if (count >= 5) {
            checkCount(player);
        } else {
            count = 0;
        }
    }

    function checkCount(player) {
        if (player === -1) {
            alert("Player (0) WIN");
        } else {
            alert("Player (x) WIN");
        }
        count = 0;
        init()
    }

    function yourTurn() {
        turn = !turn;
    }

    function init() {
        board = Array(9).fill().map(() => Array(9).fill(0));
        drawBoard(-2, -2)
    }
</script>
</body>
</html>